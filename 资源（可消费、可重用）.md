资源（可消费、可重用）

资源分配图：

进程：圆圈

资源：方框

资源实例：方框中的黑点

申请资源：一个从圆圈指向方框的有向线段

占有资源：从黑点到圆圈的有向线段

死锁的四个条件（充分必要）：

1. 互斥：资源特有属性
2. 占有且等待（互相等待）
3. 不可抢占（不能抢占别的进程资源，不主动释放自己占有的资源）
4. 循环等待

解决方案：

1. 死锁预防：破坏四个条件之一
2. 死锁避免：避免发生死锁的条件（循环等待）
3. 死锁检测：不做任何进程启动的资源分配规定，周期性检测死锁并解决。

死锁预防：

1. 互斥：不破坏
2. 占有且等待：占有不等待，等待不占有，不等待不占有=》资源打包一次性申请
3. 不可抢占：
   1. 抢占别人
   2. 主动释放
4. 循环等待=》资源线性化、编号=》只能申请已占有资源编号后面的资源=》反证法

死锁避免：

1. 进程启动拒绝=》所有的进程物理并发都能满足所有进程最大资源需要的时候才启动。
2. 资源启动拒绝：
   1. 安全状态：找到一条进程执行路径，使得所有进程都能执行完成（进程执行完后会释放所占有的所有资源）
   2. 不安全状态：找不到 vs 死锁（进程在执行的过程中，不一定要等到进程执行结束。进程可能会释放所占有的资源）（不安全不一定是死锁，但是死锁一定是不安全状态）

银行家算法：

1. 合法性判断
2. 资源足够性判断
3. 预分配
4. 状态判断
5. 执行分配（执行预分配、撤回预分配）

死锁检测：还原点（没死锁）

死锁=》四种方式（评价标准、选择标准）

综合策略：

资源分组，组间线性化，组内按照资源特点管理

哲学家问题：

死锁=》（1）资源角度：增加可用资源（2）资源使用角度：合理使用=》

​	（A）规则执行：偶数编号先左后右，奇数编号先右后左（B）限制使用：同时只有四个哲学家就餐（C）管程

